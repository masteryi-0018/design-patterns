###### 十六、状态模式

1. “状态变化”模式——针对对象变化进行管理，维持高层模块稳定
    - 状态模式
    - 备忘录

2. 动机与背景
    - 某些对象状态改变时，行为也会随之改变，例如文档处于只读状态时的行为与读写状态时的行为可能存在很大不同。在运行时根据对象状态透明更改对象的行为，而不引入紧耦合

3. 没有使用设计模式的代码
```cpp

```

4. 存在的问题
    - 如果需要添加一个新的状态`wait`，那么就需要新增对应的枚举值与代码中的`if-else`

5. 解决方法
    - 使用状态模式，去掉`if-else`这样的`坏味道`，将**编译时依赖**转变为**运行时依赖**

6. 使用设计模式的代码
```cpp

```

7. 适用场景
    - 

8. 总结
    - 虚函数就是运行时的`if-else`
    - 将所有与一个特定状态相关的行为都放入一个State的子类中，实现了具体操作与状态转换之间的解耦
    - 转换是原子性的，要么彻底转换，要么不转换
    - 如果State对象没有实例变量，可以共享一个State对象（单例模式）